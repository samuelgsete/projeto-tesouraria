<app-menu></app-menu>
<div class="body">
    <div class="hero">
        <div class="row header-page">
            <div class="col-sm-6 col-md-8 col-lg-10 col-xl-10">
                <mat-icon>description</mat-icon>
                <h2>Relatorio</h2>
            </div>
            <div class="col-sm-6 col-md-4 col-lg-2 col-xl-2">
                <button type="button" mdbBtn color="light" block="true" class="z-depth-0"  mdbWavesEffect>IMPRIMIR</button>
            </div>
        </div>
    </div>
    <div class="report z-depth-1-half">
        <div class="loading" *ngIf="indicadorDeCarregamento">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </div>
        
        <div class="report-header">
            <div class="row">
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="saldo-inicial" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo inicial</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ relatorio.saldoInicial | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="saldo-atual" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo atual</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4 >{{ relatorio.saldoAtual | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="rendimento-entradas" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Rendimento de entradas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4 >{{ relatorio.rendimentoTotalEntradas  | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="rendimento-saidas" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Rendimento de saidas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4 >{{ relatorio.rendimentoTotalSaidas  | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
        </div>

        <mat-accordion>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-description>Escolha um período de referência</mat-panel-description>
                </mat-expansion-panel-header>
                <div class="row">
                    <div class="col-6">
                        <mat-form-field>
                            <mat-label>Escolha um mês de referência</mat-label>
                            <mat-select [(value)]="mesSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let mes of meses; let i = index" [value]="mes">{{ mes }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field>
                            <mat-label>Escolha um ano de referência</mat-label>
                            <mat-select [(value)]="anoSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let ano of anos; let i = index" [value]="ano">{{ ano }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
        <br>
        <div class="main-content">
            <div class="row">
                <div class="col">
                    <mdb-card class="aviso" *ngIf="relatorio.entradas.length == 0 && relatorio.saidas.length == 0" mdbWavesEffect>
                        <mdb-card-body>
                            <mdb-card-title>
                                <h4>
                                    <mat-icon>warning</mat-icon>
                                </h4>
                            </mdb-card-title>
                            <mdb-card-text>
                                <p>Nenhuma movimentação encontrada no período solicitado</p>
                            </mdb-card-text>         
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
            <div *ngIf="relatorio.entradas[0] != null || relatorio.saidas[0] != null">
                <div class="row"><div class="col" >Mês/ano: {{ mesSelecionado }} de {{ anoSelecionado }}</div></div>
                <table>
                    <tr>
                        <th class="entradas">ENTRADAS</th>
                        <th class="saidas">SAIDAS</th>
                    </tr>
                    <tr>
                        <td>
                            <div class="box-moviment" *ngFor="let e of relatorio.entradas">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ e.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-entrada">{{ e.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ e.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="e.ofertante != null" >{{ e.ofertante }}</mdb-card-text> 
                                        <mdb-card-text *ngIf="e.detalhes != null" >{{ e.detalhes }}</mdb-card-text>            
                                    </mdb-card-body>
                                </mdb-card>
                            </div>
                        </td>
                        <td>
                            <div class="box-moviment" *ngFor="let s of relatorio.saidas">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ s.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-saida">{{ s.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ s.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="s.detalhes != null" >{{ s.detalhes }}</mdb-card-text>             
                                    </mdb-card-body>
                                </mdb-card>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.rendimentoMensalEntradas | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.rendimentoMensalSaidas | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mdb-card class="saldo-mensal" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>
                                        <p>Saldo mensal</p>
                                    </mdb-card-text>
                                    <mdb-card-title>
                                        <h4 >{{ relatorio.saldoMensal  | currency:'BRL' }}</h4>
                                    </mdb-card-title>                  
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div> 
 
<div class="mobile">
    <div class="hero">
        <div class="header-page">
            <div class="name-page">
                <mat-icon>description</mat-icon>
                <h2>Relatório</h2>
            </div>
            <button type="button" mdbBtn color="light" class="z-depth-0" mdbWavesEffect>IMPRIMIR</button>
        </div>
    </div>
    <div class="report z-depth-0">
        <div class="loading" *ngIf="indicadorDeCarregamento">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </div>
        <div class="report-header">
            <div class="row">
                <div class="col-12">
                    <mdb-card class="saldo-inicial" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo inicial</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ relatorio.saldoInicial | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-12">
                    <mdb-card class="saldo-atual" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo atual</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ relatorio.saldoAtual | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-12">
                    <mdb-card class="rendimento-entradas" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Rendimento de entradas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ relatorio.rendimentoTotalEntradas  | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-12">
                    <mdb-card class="rendimento-saidas" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Rendimento de saidas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ relatorio.rendimentoTotalSaidas  | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
        </div>

        <mat-accordion>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-description>Escolha um período de referência</mat-panel-description>
                </mat-expansion-panel-header>
                <div class="row">
                    <div class="col-12">
                        <mat-form-field>
                            <mat-label>Escolha um mês de referência</mat-label>
                            <mat-select [(value)]="mesSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let mes of meses; let i = index" [value]="mes">{{ mes }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-12">
                        <mat-form-field>
                            <mat-label>Escolha um ano de referência</mat-label>
                            <mat-select [(value)]="anoSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let ano of anos; let i = index" [value]="ano">{{ ano }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
        <br>
        <div class="main-content">
            <div class="row">
                <div class="col">
                    <mdb-card class="aviso" *ngIf="relatorio.entradas[0] == null && relatorio.saidas[0] == null" mdbWavesEffect>
                        <mdb-card-body>
                            <mdb-card-text>
                                <p>Nenhuma movimentação encontrada no período solicitado</p>
                            </mdb-card-text>       
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
            <div *ngIf="relatorio.entradas[0] != null || relatorio.saidas[0] != null">
                <div class="row"><div class="col">Mês/ano: {{ mesSelecionado}} de {{ anoSelecionado }}</div></div>
                <table>
                    <tr>
                        <th class="entradas">ENTRADAS</th>
                    </tr>
                    <tr>
                        <td>
                            <div class="box-moviment" *ngFor="let e of relatorio.entradas">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ e.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-entrada">{{ e.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ e.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="e.ofertante != null" >{{ e.ofertante }}</mdb-card-text> 
                                        <mdb-card-text *ngIf="e.detalhes != null" >{{ e.detalhes }}</mdb-card-text>            
                                    </mdb-card-body>
                                </mdb-card>
                            </div>                              
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.rendimentoMensalEntradas | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <th class="saidas">SAIDAS</th>
                    </tr>
                    <tr>
                        <td>
                            <div class="box-moviment" *ngFor="let s of relatorio.saidas">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ s.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-saida">{{ s.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ s.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="s.detalhes != null" >{{ s.detalhes }}</mdb-card-text>             
                                    </mdb-card-body>
                                </mdb-card>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body >
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.rendimentoMensalSaidas | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mdb-card class="saldo-mensal" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>
                                        <p>Saldo mensal</p>
                                    </mdb-card-text>
                                    <mdb-card-title>
                                        <h4 >{{ relatorio.saldoMensal  | currency:'BRL' }}</h4>
                                    </mdb-card-title>                  
                                </mdb-card-body>
                            </mdb-card>
                        </td> 
                    </tr>
                </table>         
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>  