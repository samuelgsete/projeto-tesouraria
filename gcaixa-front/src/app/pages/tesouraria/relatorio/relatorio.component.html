<app-menu></app-menu>
<div class="body">
    <div class="hero">
        <div class="row header-page">
            <div class="col-sm-6 col-md-8 col-lg-10 col-xl-10">
                <div class="name-page">
                    <mat-icon>description</mat-icon>
                    <h2>Relatorio</h2>
                </div>
            </div>
            <div class="col-sm-6 col-md-4 col-lg-2 col-xl-2">
                <button type="button" mdbBtn color="light" block="true" class="z-depth-0"  mdbWavesEffect>IMPRIMIR</button>
            </div>
        </div>
    </div>
    <div class="report z-depth-1-half">
        <div class="loading" *ngIf="indicadorDeCarregamento">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </div>
        
        <div class="report-header">
            <div class="row">
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="saldo-inicial z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo inicial</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ receitas.openingBalance | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="saldo-atual z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo atual</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4 >{{ receitas.currentBalance | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="rendimento-entradas z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Total de receitas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4 >{{ receitas.incomeRecipes | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-md-6 col-lg-3 col-xl-3">
                    <mdb-card class="rendimento-saidas z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Total de despesas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4 >{{ receitas.incomeExpenses | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
        </div>

        <mat-accordion>
            <mat-expansion-panel>
                <mat-expansion-panel-header mdbWavesEffect>
                    <mat-panel-description>Escolha um período de referência</mat-panel-description>
                </mat-expansion-panel-header>
                <div class="row">
                    <div class="col-6">
                        <mat-form-field>
                            <mat-label>Mês</mat-label>
                            <mat-select [(value)]="mesSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let mes of meses; let i = index" [value]="mes">{{ mes }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-6">
                        <mat-form-field>
                            <mat-label>Ano</mat-label>
                            <mat-select [(value)]="anoSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let ano of anos; let i = index" [value]="ano">{{ ano }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
        <br>
        <div class="main-content">
            <div class="row">
                <div class="col">
                    <mdb-card class="empty-data" *ngIf="relatorio.recipes.length == 0 && relatorio.expenses.length == 0" mdbWavesEffect>
                        <mdb-card-body>
                            <img src="/assets/img/box-empty.png" alt="empty" width="200px" height="200px">
                            <h4>Nenhuma registro encontrado</h4>
                            <h5>Verifique o periodo solicitado</h5>      
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
            <div *ngIf="relatorio.recipes[0] != null || relatorio.expenses[0] != null">
                <div class="row">
                    <div class="col">
                        <p>Rendimentos de {{ mesSelecionado }} de {{ anoSelecionado }}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-6">
                        <mdb-card mdbWavesEffect>
                            <mdb-card-body>
                                <canvas mdbChart
                                    [chartType]="chartType"
                                    [(datasets)]="entradas"
                                    [labels]="rotulosEntradas"
                                    [colors]="coresEntradas"
                                    [options]="chartOptions"
                                    [legend]="true"
                                >
                                </canvas>
                            </mdb-card-body> 
                        </mdb-card>
                    </div>
                    <div class="col-6">
                        <mdb-card mdbWavesEffect>
                            <mdb-card-body>
                                <canvas mdbChart
                                    [chartType]="chartType"
                                    [(datasets)]="saidas"
                                    [labels]="rotulosSaidas"
                                    [colors]="coresSaidas"
                                    [options]="chartOptions"
                                    [legend]="true"
                                >
                                </canvas>
                            </mdb-card-body> 
                        </mdb-card>
                    </div>
                </div>
                <table>
                    <tr>
                        <th class="entradas">RECEITAS</th>
                        <th class="saidas">DESPESAS</th>
                    </tr>
                    <tr>
                        <td>
                            <div class="box-moviment" *ngFor="let e of relatorio.recipes">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ e.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-entrada">{{ e.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ e.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="e.ofertante != null" >{{ e.ofertante }}</mdb-card-text> 
                                        <mdb-card-text *ngIf="e.detalhes != null" >{{ e.detalhes }}</mdb-card-text>            
                                    </mdb-card-body>
                                </mdb-card>
                            </div>
                        </td>
                        <td>
                            <div class="box-moviment" *ngFor="let s of relatorio.expenses">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ s.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-saida">{{ s.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ s.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="s.detalhes != null" >{{ s.detalhes }}</mdb-card-text>             
                                    </mdb-card-body>
                                </mdb-card>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.incomeRecipesMonthly | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.incomeExpensesMonthly | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mdb-card class="saldo-mensal" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>
                                        <p>Saldo mensal</p>
                                    </mdb-card-text>
                                    <mdb-card-title>
                                        <h4 >{{ relatorio.balanceMonthly | currency:'BRL' }}</h4>
                                    </mdb-card-title>                  
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</div> 
 
<div class="mobile">
    <div class="hero">
        <div class="header-page">
            <div class="name-page">
                <mat-icon>description</mat-icon>
                <h2>Relatório</h2>
            </div>
            <button type="button" mdbBtn color="light" class="z-depth-0" mdbWavesEffect>IMPRIMIR</button>
        </div>
    </div>
    <div class="report z-depth-0">
        <div class="loading" *ngIf="indicadorDeCarregamento">
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
        </div>
        <div class="report-header">
            <div class="row">
                <div class="col-12">
                    <mdb-card class="saldo-inicial z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo inicial</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ receitas.openingBalance | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-12">
                    <mdb-card class="saldo-atual z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Saldo atual</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ receitas.currentBalance | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-12">
                    <mdb-card class="rendimento-entradas z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Total de receitas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ receitas.incomeRecipes  | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
                <div class="col-12">
                    <mdb-card class="rendimento-saidas z-depth-0" mdbWavesEffect>
                        <mdb-card-body>
                            <mat-icon>attach_money</mat-icon>
                            <mdb-card-text>
                                <p>Total de despesas</p>
                            </mdb-card-text>
                            <mdb-card-title>
                                <h4>{{ receitas.incomeExpenses  | currency:'BRL' }}</h4>
                            </mdb-card-title>                   
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
        </div>

        <mat-accordion>
            <mat-expansion-panel>
                <mat-expansion-panel-header mdbWavesEffect>
                    <mat-panel-description>Escolha um período de referência</mat-panel-description>
                </mat-expansion-panel-header>
                <div class="row">
                    <div class="col-12">
                        <mat-form-field>
                            <mat-label>Mês</mat-label>
                            <mat-select [(value)]="mesSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let mes of meses; let i = index" [value]="mes">{{ mes }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                    <div class="col-12">
                        <mat-form-field>
                            <mat-label>Ano</mat-label>
                            <mat-select [(value)]="anoSelecionado" (selectionChange)="obterRelatorio()">
                                <mat-option *ngFor="let ano of anos; let i = index" [value]="ano">{{ ano }}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
        <br>
        <div class="main-content">
            <div class="row">
                <div class="col">
                    <mdb-card class="empty-data" *ngIf="relatorio.recipes.length == 0 && relatorio.expenses.length == 0" mdbWavesEffect>
                        <mdb-card-body>
                            <img src="/assets/img/box-empty.png" alt="empty" width="200px" height="200px">
                            <h4>Nenhuma registro encontrado</h4>
                            <h5>Verifique o periodo solicitado</h5>      
                        </mdb-card-body>
                    </mdb-card>
                </div>
            </div>
            <div *ngIf="relatorio.recipes[0] != null || relatorio.expenses[0] != null">
                <div class="row">
                    <div class="col">
                        <p>Rendimentos {{ mesSelecionado}} de {{ anoSelecionado }}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-12">
                        <mdb-card mdbWavesEffect>
                            <mdb-card-body>
                                <canvas mdbChart
                                    [chartType]="chartType"
                                    [(datasets)]="entradas"
                                    [labels]="rotulosEntradas"
                                    [colors]="coresEntradas"
                                    [options]="chartOptions"
                                    [legend]="true"
                                >
                                </canvas>
                            </mdb-card-body> 
                        </mdb-card>
                    </div>
                </div>
                <table>
                    <tr>
                        <th class="entradas">RECEITAS</th>
                    </tr>
                    <tr>
                        <td>
                            <div class="box-moviment" *ngFor="let e of relatorio.recipes">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ e.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-entrada">{{ e.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ e.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="e.ofertante != null" >{{ e.ofertante }}</mdb-card-text> 
                                        <mdb-card-text *ngIf="e.detalhes != null" >{{ e.detalhes }}</mdb-card-text>            
                                    </mdb-card-body>
                                </mdb-card>
                            </div>                              
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.incomeRecipesMonthly | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                </table>
                <div class="row">
                    <div class="col">
                        <mdb-card mdbWavesEffect>
                            <mdb-card-body>
                                <canvas mdbChart
                                    [chartType]="chartType"
                                    [(datasets)]="saidas"
                                    [labels]="rotulosSaidas"
                                    [colors]="coresSaidas"
                                    [options]="chartOptions"
                                    [legend]="true"
                                >
                                </canvas>
                            </mdb-card-body> 
                        </mdb-card>
                    </div>
                </div>
                <table>
                    <tr>
                        <th class="saidas">DESPESAS</th>
                    </tr>
                    <tr>
                        <td>
                            <div class="box-moviment" *ngFor="let s of relatorio.expenses">
                                <mdb-card mdbWavesEffect>
                                    <mdb-card-body>
                                        <mdb-card-text>{{ s.descricao }}</mdb-card-text>
                                        <mdb-card-title>
                                            <h4 class="valor-saida">{{ s.valor | currency:'BRL' }}</h4>
                                        </mdb-card-title>    
                                        <mdb-card-text>{{ s.registro | dateFormat }}</mdb-card-text>   
                                        <mdb-card-text *ngIf="s.detalhes != null" >{{ s.detalhes }}</mdb-card-text>             
                                    </mdb-card-body>
                                </mdb-card>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <mdb-card class="indigo lighten-5" mdbWavesEffect>
                                <mdb-card-body >
                                    <mdb-card-text>Rendimento mensal</mdb-card-text>
                                    <mdb-card-title>
                                        <h4>{{ relatorio.incomeExpensesMonthly | currency:'BRL' }}</h4>
                                    </mdb-card-title>                   
                                </mdb-card-body>
                            </mdb-card>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <mdb-card class="saldo-mensal" mdbWavesEffect>
                                <mdb-card-body>
                                    <mdb-card-text>
                                        <p>Saldo mensal</p>
                                    </mdb-card-text>
                                    <mdb-card-title>
                                        <h4 >{{ relatorio.balanceMonthly  | currency:'BRL' }}</h4>
                                    </mdb-card-title>                  
                                </mdb-card-body>
                            </mdb-card>
                        </td> 
                    </tr>
                </table>         
            </div>
        </div>
    </div>
</div>
<app-footer></app-footer>  